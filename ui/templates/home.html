<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Nova â€” Login & Register</title>
    <meta name="description" content="Moderne Login/Register UI im Nova-Stil." />

    <link rel="stylesheet" href="../static/home.css" />
</head>

<body>
<header>
    <div class="container nav">
        <a class="brand" href="#">
            <span class="logo" aria-hidden="true"></span>
            <span>Nova</span>
        </a>

        <nav class="navlinks" aria-label="Hauptnavigation">
            <a href="#features">Features</a>
            <a href="#kunden">Kunden</a>
            <a href="#preise">Preise</a>
            <a href="#faq">FAQ</a>
        </nav>

        <div class="navcta">
            <label class="theme-switch" title="Light/Dark Mode">
                <input type="checkbox" id="themeToggle" aria-label="Theme umschalten">
                <span class="slider"></span>
            </label>

            <a class="btn" href="#preise">Preise</a>
            <a class="btn primary" href="#auth">Jetzt starten</a>
        </div>
    </div>
</header>

<main>
    <section id="auth">
        <div class="container authWrap">

            {{if .LoggedIn}}

            <!-- LOGGED IN VIEW (same home.html) -->
            <div class="welcomeCard">
                <span class="pill"><span class="dot" aria-hidden="true"></span> Angemeldet</span>
                <h1 class="welcomeTitle">Willkommen zurÃ¼ck, {{.Email}}</h1>
                <p class="welcomeLead">
                    Du bist jetzt erfolgreich eingeloggt. (Ohne Session/Cookie gilt das nur fÃ¼r diesen Request â€”
                    bei Refresh landest du wieder im Login.)
                </p>

                <div class="welcomeMeta" aria-label="Info">
                    <span>âœ¨ Nova UI</span>
                    <span>ðŸ”’ Auth OK</span>
                    <span>ðŸ“© {{.Email}}</span>
                </div>

                <div style="margin-top:18px; display:flex; gap:10px; flex-wrap:wrap;">
                    <a class="btn primary" href="#features">Weiter</a>
                    <a class="btn" href="/">ZurÃ¼ck zum Login</a>
                </div>
            </div>

            <!-- Optional: right side info card even when logged-in -->
            <aside class="infoCard" aria-label="Info">
                <h3 class="infoTitle">NÃ¤chster Schritt</h3>
                <p class="infoText">
                    Wenn du willst, kann ich dir als nÃ¤chsten Schritt Sessions (sauber) einbauen, damit du nach Refresh
                    eingeloggt bleibst â€” ohne Email im Cookie, sondern mit Session-ID.
                </p>

                <ul class="infoList">
                    <li><span class="tick" aria-hidden="true"></span> DB-Login statt Dummy</li>
                    <li><span class="tick" aria-hidden="true"></span> Passwort-Hashing (bcrypt)</li>
                    <li><span class="tick" aria-hidden="true"></span> Session + Logout</li>
                </ul>
            </aside>

            {{else}}

            <!-- LEFT: Auth Card -->
            <div class="glass authCard" aria-label="Login/Register">
                <div class="authTop">
                    <span class="badge"><span class="spark" aria-hidden="true"></span> Secure Access</span>
                    <span class="pill"><span class="dot" aria-hidden="true"></span> Nova Auth</span>
                </div>

                <div class="actions" style="padding-top:0;">
                    <div class="tabs" role="tablist" aria-label="Login/Register Tabs">
                        <button class="tab active" id="tabLogin" type="button" role="tab" aria-selected="true" aria-controls="loginForm">
                            Login
                        </button>
                        <button class="tab" id="tabRegister" type="button" role="tab" aria-selected="false" aria-controls="registerForm">
                            Register
                        </button>
                    </div>
                    <a class="mutelink" href="#faq">Hilfe</a>
                </div>

                <h2 class="authTitle">Willkommen zurÃ¼ck</h2>
                <p class="authSub">Melde dich an oder erstelle in Sekunden einen Account â€” alles im Nova-Look.</p>

                {{if .Error}}
                <div class="errorBox">{{.Error}}</div>
                {{end}}

                <!-- LOGIN FORM -->
                <form id="loginForm" class="active" action="/login" method="POST" autocomplete="on">
                    <div class="fieldGrid">
                        <div class="field">
                            <span class="label">E-Mail</span>
                            <input class="input" name="email" type="email" placeholder="name@beispiel.de" required />
                        </div>
                        <div class="field">
                            <span class="label">Passwort</span>
                            <input class="input" name="password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required />
                        </div>
                    </div>

                    <div class="fineprint">
                        Tipp: Du kannst in Go alle Inputs Ã¼ber <code>request.Form</code> auslesen (nach <code>ParseForm()</code>).
                    </div>

                    <div class="submitRow">
                        <button class="btn primary" type="submit">Anmelden</button>
                        <button class="btn" type="button" id="toRegisterBottom">Noch keinen Account? Registrieren</button>
                    </div>
                </form>

                <!-- REGISTER FORM -->
                <form id="registerForm" action="/register" method="POST" autocomplete="on">
                    <div class="fieldGrid">
                        <div class="row2">
                            <div class="field">
                                <span class="label">Vorname</span>
                                <input class="input" name="first_name" type="text" placeholder="Max" required />
                            </div>
                            <div class="field">
                                <span class="label">Nachname</span>
                                <input class="input" name="last_name" type="text" placeholder="Mustermann" required />
                            </div>
                        </div>

                        <div class="field">
                            <span class="label">E-Mail</span>
                            <input class="input" name="email" type="email" placeholder="name@beispiel.de" required />
                        </div>

                        <div class="row2">
                            <div class="field">
                                <span class="label">Passwort</span>
                                <input class="input" name="password" type="password" placeholder="Mind. 8 Zeichen" required />
                            </div>
                            <div class="field">
                                <span class="label">BestÃ¤tigen</span>
                                <input class="input" name="confirm" type="password" placeholder="Passwort wiederholen" required />
                            </div>
                        </div>
                    </div>

                    <div class="fineprint">
                        Mit dem Erstellen eines Accounts akzeptierst du unsere <a class="mutelink" href="#faq" style="padding:0;">Bedingungen</a>.
                    </div>

                    <div class="submitRow">
                        <button class="btn primary" type="submit">Account erstellen</button>
                        <button class="btn" type="button" id="toLoginBottom">Schon dabei? Zum Login</button>
                    </div>
                </form>
            </div>

            <!-- RIGHT: Info / benefits -->
            <aside class="infoCard" aria-label="Info">
                <h3 class="infoTitle">Warum Nova Auth?</h3>
                <p class="infoText">
                    Gleiche Designsprache wie deine Landingpage: Glasmorphism, Gradients und saubere Typografie.
                    Du kannst die Forms direkt an deine Go-Routen <code>/login</code> und <code>/register</code> hÃ¤ngen.
                </p>

                <ul class="infoList">
                    <li><span class="tick" aria-hidden="true"></span> Zwei Forms, ein Layout (Tabs)</li>
                    <li><span class="tick" aria-hidden="true"></span> Responsive & mobile-first</li>
                    <li><span class="tick" aria-hidden="true"></span> Light/Dark Toggle wie oben</li>
                </ul>

                <div style="margin-top:16px; display:flex; gap:10px; flex-wrap:wrap;">
                    <a class="btn primary" href="#auth">Loslegen</a>
                    <a class="btn" href="#features">Zur Landingpage</a>
                </div>
            </aside>

            {{end}}
        </div>
    </section>

    <section id="features" style="padding-top: 30px;">
        <div class="container">
            <span class="pill"><span class="dot" aria-hidden="true"></span> Optional</span>
            <h2 style="margin:14px 0 6px; font-size:1.6rem; letter-spacing:-0.01em;">Du kannst die restlichen Sections behalten</h2>
            <p style="margin:0; color: var(--muted); line-height:1.6;">
                Wenn du willst, kannst du unten deine Features/FAQ/Preise weiter anzeigen â€” oder diese Seite nur fÃ¼r Auth nutzen.
            </p>
        </div>
    </section>

    <section id="faq">
        <div class="container">
            <div class="glass" style="padding:18px;">
                <h2 style="margin:0 0 8px; font-size:1.4rem;">Mini-FAQ</h2>
                <p style="margin:0; color:var(--muted); line-height:1.6;">
                    Die Form-Targets sind <code>/login</code> und <code>/register</code>. In Go: <code>request.ParseForm()</code>, dann <code>request.Form</code>.
                </p>
            </div>
        </div>
    </section>
</main>

<footer style="padding: 30px 0 44px; color: var(--muted); border-top: 1px solid rgba(255,255,255,.08); background: rgba(7,10,20,.35); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);">
    <div class="container" style="display:flex; align-items:flex-start; justify-content:space-between; gap: 16px; flex-wrap: wrap;">
        <div>
            <div class="brand" style="margin-bottom:8px;">
                <span class="logo" aria-hidden="true"></span>
                <span>Nova</span>
            </div>
            <small style="color: var(--muted2);">Â© <span>2026</span> â€¢ Login/Register UI â€¢ Light/Dark Toggle</small>
        </div>

        <div style="display:flex; gap: 14px; flex-wrap: wrap;">
            <a class="mutelink" href="#auth">Auth</a>
            <a class="mutelink" href="#features">Features</a>
            <a class="mutelink" href="#faq">FAQ</a>
        </div>
    </div>
</footer>

<script>
    // Theme toggle
    const toggle = document.getElementById("themeToggle");
    toggle.addEventListener("change", () => {
        document.body.classList.toggle("light", toggle.checked);
    });

    // Tabs: Login/Register
    const tabLogin = document.getElementById("tabLogin");
    const tabRegister = document.getElementById("tabRegister");
    const loginForm = document.getElementById("loginForm");
    const registerForm = document.getElementById("registerForm");

    const toRegisterBottom = document.getElementById("toRegisterBottom");
    const toLoginBottom = document.getElementById("toLoginBottom");

    function showLogin(){
        if(!tabLogin) return;
        tabLogin.classList.add("active");
        tabRegister.classList.remove("active");
        tabLogin.setAttribute("aria-selected", "true");
        tabRegister.setAttribute("aria-selected", "false");

        loginForm.classList.add("active");
        registerForm.classList.remove("active");
    }

    function showRegister(){
        if(!tabRegister) return;
        tabRegister.classList.add("active");
        tabLogin.classList.remove("active");
        tabRegister.setAttribute("aria-selected", "true");
        tabLogin.setAttribute("aria-selected", "false");

        registerForm.classList.add("active");
        loginForm.classList.remove("active");
    }

    // Wenn wir im LoggedIn-View sind, existieren die Tabs nicht -> null checks sind wichtig
    if(tabLogin && tabRegister && loginForm && registerForm){
        tabLogin.addEventListener("click", showLogin);
        tabRegister.addEventListener("click", showRegister);
        if(toRegisterBottom) toRegisterBottom.addEventListener("click", showRegister);
        if(toLoginBottom) toLoginBottom.addEventListener("click", showLogin);
    }
</script>
</body>
</html>
